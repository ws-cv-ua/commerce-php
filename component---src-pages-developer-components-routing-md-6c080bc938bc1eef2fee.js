"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[6259],{72405:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return c}});var a,r=n(87462),o=n(63366),m=(n(15007),n(64983)),i=n(91515),p=["components"],l={},s=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,m.mdx)("div",e)}),d={_frontmatter:l},u=i.Z;function c(e){var t=e.components,n=(0,o.Z)(e,p);return(0,m.mdx)(u,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,m.mdx)("h1",{id:"routing"},"Routing"),(0,m.mdx)("p",null,"In web applications, such as Adobe Commerce and Magento Open Source, routing is the act of providing data from a URL request to the appropriate class for processing.\nAdobe Commerce and Magento Open Source routing uses the following flow:"),(0,m.mdx)("p",null,(0,m.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1142px"}},"\n      ",(0,m.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"5.3125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,m.mdx)("picture",{parentName:"span"},"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/55f90875c307c12e88a7946e8892cabb/cb523/magento2-request-processing.webp 320w","/commerce-php/static/55f90875c307c12e88a7946e8892cabb/797b9/magento2-request-processing.webp 640w","/commerce-php/static/55f90875c307c12e88a7946e8892cabb/7c99d/magento2-request-processing.webp 1142w"],sizes:"(max-width: 1142px) 100vw, 1142px",type:"image/webp"}),"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/55f90875c307c12e88a7946e8892cabb/72799/magento2-request-processing.png 320w","/commerce-php/static/55f90875c307c12e88a7946e8892cabb/6af66/magento2-request-processing.png 640w","/commerce-php/static/55f90875c307c12e88a7946e8892cabb/b490f/magento2-request-processing.png 1142w"],sizes:"(max-width: 1142px) 100vw, 1142px",type:"image/png"}),"\n          ",(0,m.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-php/static/55f90875c307c12e88a7946e8892cabb/b490f/magento2-request-processing.png",alt:"Request processing",title:"Request processing",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,m.mdx)("h2",{id:"frontcontroller-class"},(0,m.mdx)("inlineCode",{parentName:"h2"},"FrontController")," class"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/FrontController.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"FrontController")," class")," class searches through a list of routers, provided by the ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/RouterList.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"RouterList"))," class, until it matches one that can process a request.\nWhen the ",(0,m.mdx)("inlineCode",{parentName:"p"},"FrontController")," finds a matching router, it dispatches the request to an ",(0,m.mdx)("a",{parentName:"p",href:"#action-class"},"action class")," returned by the router."),(0,m.mdx)("p",null,"If the ",(0,m.mdx)("inlineCode",{parentName:"p"},"FrontController")," cannot find a router to process a request, it uses the ",(0,m.mdx)("a",{parentName:"p",href:"#default-router"},"default router"),"."),(0,m.mdx)("h2",{id:"router-class"},"Router class"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/RouterInterface.php"},"Router class")," matches a request to an ",(0,m.mdx)("a",{parentName:"p",href:"#action-class"},"action class")," that processes the request."),(0,m.mdx)("p",null,"The following tables show the core routers that come with Magento:"),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},(0,m.mdx)("inlineCode",{parentName:"strong"},"frontend")," area routers:")),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Name"),(0,m.mdx)("th",{parentName:"tr",align:null},"Sort order"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Robots/Controller/Router.php"},"robots")),(0,m.mdx)("td",{parentName:"tr",align:null},"10"),(0,m.mdx)("td",{parentName:"tr",align:null},"Matches request to the ",(0,m.mdx)("inlineCode",{parentName:"td"},"robots.txt")," file")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/UrlRewrite/Controller/Router.php"},"urlrewrite")),(0,m.mdx)("td",{parentName:"tr",align:null},"20"),(0,m.mdx)("td",{parentName:"tr",align:null},"Matches requests with URL defined in the database")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/Router/Base.php"},"standard")),(0,m.mdx)("td",{parentName:"tr",align:null},"30"),(0,m.mdx)("td",{parentName:"tr",align:null},"The standard router")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Cms/Controller/Router.php"},"cms")),(0,m.mdx)("td",{parentName:"tr",align:null},"60"),(0,m.mdx)("td",{parentName:"tr",align:null},"Matches requests for CMS pages")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/Router/DefaultRouter.php"},"default")),(0,m.mdx)("td",{parentName:"tr",align:null},"100"),(0,m.mdx)("td",{parentName:"tr",align:null},"The default router")))),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},(0,m.mdx)("inlineCode",{parentName:"strong"},"adminhtml")," area routers:")),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Name"),(0,m.mdx)("th",{parentName:"tr",align:null},"Sort order"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Backend/App/Router.php"},"admin")),(0,m.mdx)("td",{parentName:"tr",align:null},"10"),(0,m.mdx)("td",{parentName:"tr",align:null},"Matches requests in the Admin area")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("a",{parentName:"td",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/Router/DefaultRouter.php"},"default")),(0,m.mdx)("td",{parentName:"tr",align:null},"100"),(0,m.mdx)("td",{parentName:"tr",align:null},"The default router for the Admin area")))),(0,m.mdx)("h3",{id:"standard-router"},"Standard router"),(0,m.mdx)("p",null,"A ",(0,m.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/url"},"URL")," that uses the standard router has the following format:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-text"},"<store-url>/<store-code>/<front-name>/<controller-name>/<action-name>\n")),(0,m.mdx)("p",null,"Where:"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<store-url>")," - specifies the base URL for the application instance"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<store-code>")," - specifies the store context"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<front-name>")," - specifies the ",(0,m.mdx)("inlineCode",{parentName:"li"},"frontName")," of the ",(0,m.mdx)("a",{parentName:"li",href:"#frontcontroller-class"},"FrontController")," to use (for example, ","[routesxml]",")"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<controller-name>")," - specifies the name of the controller"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<action-name>")," - specifies the ",(0,m.mdx)("a",{parentName:"li",href:"#action-class"},"action class")," to execute on the controller class")),(0,m.mdx)("p",null,"The standard router parses this URL format and matches it to the correct controller and action."),(0,m.mdx)("h3",{id:"default-router"},"Default router"),(0,m.mdx)("p",null,"The ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/Router/DefaultRouter.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"DefaultRouter"))," class, is the last router that the application checks during the routing process.\nRequests that reach this point often contain invalid URLs that previous routers cannot handle."),(0,m.mdx)("p",null,"The application uses the default ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/Router/NoRouteHandler.php"},"NoRouteHandler")," to process these requests, but\nyou can write your own no-route handler by implementing the ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/Router/NoRouteHandlerInterface.php"},"NoRouteHandlerInterface"),"."),(0,m.mdx)("h3",{id:"custom-routers"},"Custom routers"),(0,m.mdx)("p",null,"Create an implementation of ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/RouterInterface.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"RouterInterface"))," to create a custom router, and\ndefine the ",(0,m.mdx)("inlineCode",{parentName:"p"},"match()")," function in this class to use your own route matching logic."),(0,m.mdx)("p",null,"If you need route configuration data, use the Route ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/Route/ConfigInterface.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"Config"))," class."),(0,m.mdx)("p",null,"To add your custom router to the list of routers for the ",(0,m.mdx)("inlineCode",{parentName:"p"},"FrontController"),", add the following entry in your module's ",(0,m.mdx)("inlineCode",{parentName:"p"},"frontend/di.xml")," file:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<type name="Magento\\Framework\\App\\RouterList">\n    <arguments>\n        <argument name="routerList" xsi:type="array">\n            <item name="%name%" xsi:type="array">\n                <item name="class" xsi:type="string">%classpath%</item>\n                <item name="disable" xsi:type="boolean">false</item>\n                <item name="sortOrder" xsi:type="string">%sortorder%</item>\n            </item>\n        </argument>\n    </arguments>\n</type>\n')),(0,m.mdx)("p",null,"Where:"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"%name%")," - The unique name of your router in Magento."),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"%classpath%")," - The path to your router class.\nExample: ",(0,m.mdx)("a",{parentName:"li",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Robots/etc/frontend/di.xml"},(0,m.mdx)("inlineCode",{parentName:"a"},"Magento\\Robots\\Controller\\Router"))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"%sortorder%")," - The sort order of this entry in the router list.")),(0,m.mdx)("h2",{id:"routesxml"},(0,m.mdx)("inlineCode",{parentName:"h2"},"routes.xml")),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"routes.xml")," file maps which module to use for a URL with a specific ",(0,m.mdx)("inlineCode",{parentName:"p"},"frontName")," and area.\nThe location of the ",(0,m.mdx)("inlineCode",{parentName:"p"},"routes.xml")," file in a module, either ",(0,m.mdx)("inlineCode",{parentName:"p"},"etc/frontend")," or ",(0,m.mdx)("inlineCode",{parentName:"p"},"etc/adminhtml"),", specifies where those routes are active."),(0,m.mdx)("p",null,"The content of this file uses the following format:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:App/etc/routes.xsd">\n    <router id="%routerId%">\n        <route id="%routeId%" frontName="%frontName%">\n            <module name="%moduleName%"/>\n        </route>\n    </router>\n</config>\n')),(0,m.mdx)("p",null,"Where:"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"%routerId")," - specifies the name of the router in Magento.\nSee the reference tables in the ",(0,m.mdx)("a",{parentName:"li",href:"#router-class"},"Router class section"),"."),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"%routeId%")," - specifies the unique node id for this route in Magento, is also the first segment of its associated layout handle XML filename (",(0,m.mdx)("inlineCode",{parentName:"li"},"routeId_controller_action.xml"),")."),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"%frontName%")," - specifies the first segment after the base URL of a request."),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"%moduleName%")," - specifies the name of your module.")),(0,m.mdx)("p",null,"For more details, see ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/etc/routes.xsd"},(0,m.mdx)("inlineCode",{parentName:"a"},"routes.xsd")),"."),(0,m.mdx)("h3",{id:"before-and-after-parameters"},"Before and after parameters"),(0,m.mdx)("p",null,"You can add a ",(0,m.mdx)("inlineCode",{parentName:"p"},"before")," or ",(0,m.mdx)("inlineCode",{parentName:"p"},"after")," parameter in the ",(0,m.mdx)("inlineCode",{parentName:"p"},"module")," entry to override or extend routes in existing modules."),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Example: ",(0,m.mdx)("inlineCode",{parentName:"strong"},"routes.xml"),":")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:App/etc/routes.xsd">\n    <router id="standard">\n        <route id="customer">\n            <module name="ExampleCorp_RoutingExample" before="Magento_Customer" />\n        </route>\n    </router>\n</config>\n')),(0,m.mdx)("p",null,"This configuration tells the ",(0,m.mdx)("inlineCode",{parentName:"p"},"FrontController")," to look for actions in the ",(0,m.mdx)("inlineCode",{parentName:"p"},"ExampleCorp_RoutingExample")," module before searching in the ",(0,m.mdx)("inlineCode",{parentName:"p"},"Magento_Customer")," module.\nIf ",(0,m.mdx)("inlineCode",{parentName:"p"},"app/code/ExampleCorp/RoutingExample/Controller/Account/Login.php")," exists, it will use that file for processing the login route instead of the original class."),(0,m.mdx)("h2",{id:"action-class"},"Action class"),(0,m.mdx)("p",null,"Action classes are implementations of the ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/ActionInterface.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"ActionInterface"))," that a router returns on matched requests.\nThe ",(0,m.mdx)("inlineCode",{parentName:"p"},"execute()")," function in these classes contain the logic for dispatching requests."),(0,m.mdx)("p",null,"Each Action should implement one or more Magento\\Framework\\App\\Action\\Http",(0,m.mdx)("em",{parentName:"p"},"HTTP Method"),"ActionInterface to declare which HTTP request methods it can process. The most common ones are:"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"\\Magento\\Framework\\App\\Action\\HttpDeleteActionInterface")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"\\Magento\\Framework\\App\\Action\\HttpGetActionInterface")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"\\Magento\\Framework\\App\\Action\\HttpPostActionInterface")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"\\Magento\\Framework\\App\\Action\\HttpPutActionInterface"))),(0,m.mdx)("p",null,"The application has a ",(0,m.mdx)("inlineCode",{parentName:"p"},"form key")," validation in place for all ",(0,m.mdx)("inlineCode",{parentName:"p"},"POST")," non-AJAX requests - if your ",(0,m.mdx)("inlineCode",{parentName:"p"},"Action")," doesn't need that validation or you want to modify it you can implement ",(0,m.mdx)("inlineCode",{parentName:"p"},"CsrfAwareActionInterface"),"."),(0,m.mdx)("p",null,"If you need to forward a request to another action in your class, use the ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Controller/Result/Forward.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"Forward::forward(string $action)"))," method."),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Example:")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-php"},"<?php\ndeclare(strict_types=1);\n\nnamespace ExampleCorp\\RoutingExample\\Controller\\Index;\n\nuse Magento\\Framework\\App\\Action\\HttpGetActionInterface;\nuse Magento\\Framework\\Controller\\Result\\Forward;\nuse Magento\\Framework\\Controller\\Result\\ForwardFactory;\n\n/**\n * Class Index\n */\nclass Index implements HttpGetActionInterface\n{\n    /**\n     * @var ForwardFactory\n     */\n    private $forwardFactory;\n\n    /**\n     * @param ForwardFactory $forwardFactory\n     */\n    public function __construct(\n        ForwardFactory $forwardFactory\n    ) {\n        $this->forwardFactory = $forwardFactory;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public function execute()\n    {\n        /** @var Forward $forward */\n        $forward = $this->forwardFactory->create();\n        return $forward->forward('defaultNoRoute');\n    }\n}\n")),(0,m.mdx)(s,{variant:"success",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"Use the ",(0,m.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/ActionFactory.php"},(0,m.mdx)("inlineCode",{parentName:"a"},"ActionFactory"))," in your router to create an instance of an ",(0,m.mdx)("inlineCode",{parentName:"p"},"Action")," class."),(0,m.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"Action class should return a ",(0,m.mdx)("inlineCode",{parentName:"p"},"result object"),"."),(0,m.mdx)("h2",{id:"result-object"},"Result object"),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr",align:null},"Name"),(0,m.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"json")),(0,m.mdx)("td",{parentName:"tr",align:null},"Sets ",(0,m.mdx)("inlineCode",{parentName:"td"},"Content-Type:application/json")," in the header and returns a json encoded representation of an array with data")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"raw")),(0,m.mdx)("td",{parentName:"tr",align:null},"Returns the data as it's been set. Does not set a ",(0,m.mdx)("inlineCode",{parentName:"td"},"Content-Type")," in the header")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"redirect")),(0,m.mdx)("td",{parentName:"tr",align:null},"Creates an external redirect, which the browser follows and requests a new url")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"forward")),(0,m.mdx)("td",{parentName:"tr",align:null},"Internally calls the execute method of another action class and does not trigger a new request from the browser. The URL stays the same")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"layout")),(0,m.mdx)("td",{parentName:"tr",align:null},"View result. You can use a generic layout response to render any kind of layout. The layout comprises a response body from its layout elements and sets it to the HTTP response")),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr",align:null},(0,m.mdx)("inlineCode",{parentName:"td"},"page")),(0,m.mdx)("td",{parentName:"tr",align:null},"View result. Encapsulates page type, page configuration, and imposes certain layout handles. ",(0,m.mdx)("inlineCode",{parentName:"td"},"page")," triggers ",(0,m.mdx)("inlineCode",{parentName:"td"},"layout.xml")," to render into HTML")))),(0,m.mdx)("h2",{id:"example-of-routing-usage"},"Example of routing usage"),(0,m.mdx)("p",null,"Declaring a new route:"),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"File:")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"ExampleCorp/RoutingExample/etc/frontend/routes.xml")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n\n<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="urn:magento:framework:App/etc/routes.xsd">\n    <router id="standard">\n        <route id="routing" frontName="routing">\n            <module name="ExampleCorp_RoutingExample" />\n        </route>\n    </router>\n</config>\n')),(0,m.mdx)("p",null,"Declaring the layout handler for our new route:"),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"File:")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"ExampleCorp/RoutingExample/view/frontend/layout/routing_index_index.xml")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n\n<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">\n    <body>\n        <referenceBlock name="page.main.title">\n            <action method="setPageTitle">\n                <argument translate="true" name="title" xsi:type="string">Routing Page</argument>\n            </action>\n        </referenceBlock>\n    </body>\n</page>\n')),(0,m.mdx)("p",null,"Defining a new custom router:"),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"File:")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"ExampleCorp/RoutingExample/etc/frontend/di.xml")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<type name="Magento\\Framework\\App\\RouterList">\n    <arguments>\n        <argument name="routerList" xsi:type="array">\n            <item name="routingExample" xsi:type="array">\n                <item name="class" xsi:type="string">ExampleCorp\\RoutingExample\\Controller\\Router</item>\n                <item name="disable" xsi:type="boolean">false</item>\n                <item name="sortOrder" xsi:type="string">40</item>\n            </item>\n        </argument>\n    </arguments>\n</type>\n')),(0,m.mdx)("p",null,"Creating the controller that will handle the ",(0,m.mdx)("inlineCode",{parentName:"p"},"routing")," route and will get the parameters passed by our router."),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"File:")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"ExampleCorp/RoutingExample/Controller/Index/Index.php")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-php"},"<?php\ndeclare(strict_types=1);\n\nnamespace ExampleCorp\\RoutingExample\\Controller\\Index;\n\nuse Magento\\Framework\\App\\Action\\HttpGetActionInterface;\nuse Magento\\Framework\\App\\RequestInterface;\nuse Magento\\Framework\\View\\Result\\Page;\nuse Magento\\Framework\\View\\Result\\PageFactory;\n\n/**\n * Class Index\n */\nclass Index implements HttpGetActionInterface\n{\n    /**\n     * @var PageFactory\n     */\n    private $pageFactory;\n\n    /**\n      * @var RequestInterface\n      */\n    private $request;\n\n    /**\n     * @param PageFactory $pageFactory\n     * @param RequestInterface $request\n     */\n    public function __construct(PageFactory $pageFactory, RequestInterface $request)\n    {\n        $this->pageFactory = $pageFactory;\n        $this->request = $request;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public function execute()\n    {\n        // Get the params that were passed from our Router\n        $firstParam = $this->request->getParam('first_param', null);\n        $secondParam = $this->request->getParam('second_param', null);\n\n        return $this->pageFactory->create();\n    }\n}\n")),(0,m.mdx)("p",null,"In the end, let's create the router class, that will match the custom route name ",(0,m.mdx)("inlineCode",{parentName:"p"},"learning")," with the existing ",(0,m.mdx)("inlineCode",{parentName:"p"},"routing")," route."),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"File:")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"ExampleCorp/RoutingExample/Controller/Router.php")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-php"},"<?php\ndeclare(strict_types=1);\n\nnamespace ExampleCorp\\RoutingExample\\Controller;\n\nuse Magento\\Framework\\App\\Action\\Forward;\nuse Magento\\Framework\\App\\ActionFactory;\nuse Magento\\Framework\\App\\ActionInterface;\nuse Magento\\Framework\\App\\RequestInterface;\nuse Magento\\Framework\\App\\ResponseInterface;\nuse Magento\\Framework\\App\\RouterInterface;\n\n/**\n * Class Router\n */\nclass Router implements RouterInterface\n{\n    /**\n     * @var ActionFactory\n     */\n    private $actionFactory;\n\n    /**\n     * @var ResponseInterface\n     */\n    private $response;\n\n    /**\n     * Router constructor.\n     *\n     * @param ActionFactory $actionFactory\n     * @param ResponseInterface $response\n     */\n    public function __construct(\n        ActionFactory $actionFactory,\n        ResponseInterface $response\n    ) {\n        $this->actionFactory = $actionFactory;\n        $this->response = $response;\n    }\n\n    /**\n     * @param RequestInterface $request\n     * @return ActionInterface|null\n     */\n    public function match(RequestInterface $request): ?ActionInterface\n    {\n        $identifier = trim($request->getPathInfo(), '/');\n\n        if (strpos($identifier, 'learning') !== false) {\n            $request->setModuleName('routing');\n            $request->setControllerName('index');\n            $request->setActionName('index');\n            $request->setParams([\n                'first_param' => 'first_value',\n                'second_param' => 'second_value'\n            ]);\n\n            return $this->actionFactory->create(Forward::class, ['request' => $request]);\n        }\n\n        return null;\n    }\n}\n")),(0,m.mdx)("p",null,"As a result, by accessing the ",(0,m.mdx)("inlineCode",{parentName:"p"},"http://site.com/learning")," route, the ",(0,m.mdx)("inlineCode",{parentName:"p"},"http://site.com/routing/index/index")," route is loaded."),(0,m.mdx)("p",null,(0,m.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"452px"}},"\n      ",(0,m.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.875%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,m.mdx)("picture",{parentName:"span"},"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/fdfbfaf6d0918477724aff347bea026e/cb523/routing-result.webp 320w","/commerce-php/static/fdfbfaf6d0918477724aff347bea026e/7acc5/routing-result.webp 452w"],sizes:"(max-width: 452px) 100vw, 452px",type:"image/webp"}),"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/fdfbfaf6d0918477724aff347bea026e/72799/routing-result.png 320w","/commerce-php/static/fdfbfaf6d0918477724aff347bea026e/fcb94/routing-result.png 452w"],sizes:"(max-width: 452px) 100vw, 452px",type:"image/png"}),"\n          ",(0,m.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-php/static/fdfbfaf6d0918477724aff347bea026e/fcb94/routing-result.png",alt:"Routing Result",title:"Routing Result",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,m.mdx)("h2",{id:"declaring-the-new-route-as-page-type"},"Declaring the new route as Page Type"),(0,m.mdx)("p",null,"After creating a new route ",(0,m.mdx)("inlineCode",{parentName:"p"},"routing/index/index"),", it is a good practice to give more control on it for the admin. By creating a new ",(0,m.mdx)("inlineCode",{parentName:"p"},"Page Type"),", the admin can manage the content of this page using widgets."),(0,m.mdx)("p",null,"Defining a new page type:"),(0,m.mdx)("blockquote",null,(0,m.mdx)("p",{parentName:"blockquote"},(0,m.mdx)("inlineCode",{parentName:"p"},"etc/frontend/page_types.xml"))),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<page_types xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_types.xsd">\n    <type id="routing_index_index" label="Routing Page"/>\n</page_types>\n')),(0,m.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"The ",(0,m.mdx)("inlineCode",{parentName:"p"},"routing_index_index")," represents the path for the new route."),(0,m.mdx)("h3",{id:"result"},"Result"),(0,m.mdx)("p",null,"As result, the new page is available in the ",(0,m.mdx)("inlineCode",{parentName:"p"},"Specified Page")," dropdown widget when creating a page."),(0,m.mdx)("p",null,(0,m.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"538px"}},"\n      ",(0,m.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"60.3125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,m.mdx)("picture",{parentName:"span"},"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/9b7902a0fc878117236fbe4901100809/cb523/routing-page-type-result.webp 320w","/commerce-php/static/9b7902a0fc878117236fbe4901100809/f7d0a/routing-page-type-result.webp 538w"],sizes:"(max-width: 538px) 100vw, 538px",type:"image/webp"}),"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/9b7902a0fc878117236fbe4901100809/72799/routing-page-type-result.png 320w","/commerce-php/static/9b7902a0fc878117236fbe4901100809/9516f/routing-page-type-result.png 538w"],sizes:"(max-width: 538px) 100vw, 538px",type:"image/png"}),"\n          ",(0,m.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-php/static/9b7902a0fc878117236fbe4901100809/9516f/routing-page-type-result.png",alt:"Routing Page Type",title:"Routing Page Type",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-developer-components-routing-md-6c080bc938bc1eef2fee.js.map