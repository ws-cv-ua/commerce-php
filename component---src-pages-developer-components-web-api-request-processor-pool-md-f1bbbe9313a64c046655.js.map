{"version":3,"file":"component---src-pages-developer-components-web-api-request-processor-pool-md-f1bbbe9313a64c046655.js","mappings":"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","sources":["webpack://commerce-php/./src/pages/developer/components/web-api/request-processor-pool.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`The request processors pool routes WebApi requests. It is located in the Magento_WebApi module: `}<inlineCode parentName=\"p\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorPool`}</inlineCode></p>\n    <p>{`Adobe Commerce and Magento Open Source define the following processors:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Processor name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Class`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`URL pattern`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`sync`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\SynchronousRequestProcessor`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`/^\\\\\\\\/V\\\\\\\\d+/`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Executes the corresponding service contract.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`syncSchema`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\SchemaRequestProcessor`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`schema`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Delivers the schema needed for generating Swagger documentation.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`async`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\AsynchronousRequestProcessor`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`/^\\\\\\\\/async(\\\\\\\\/V.+)/`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Performs an asynchronous API request. It executes `}<inlineCode parentName=\"td\">{`Magento\\\\AsynchronousOperations\\\\Model\\\\MassSchedule::publishMass`}</inlineCode>{`, which places a single message in the queue.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`asyncSchema`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\AsynchronousSchemaRequestProcessor`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`async/schema`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Delivers the schema needed for generating Swagger documentation for asynchronous endpoints.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`asyncBulk`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\VirtualType\\\\AsynchronousBulkRequestProcessor`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`/^\\\\\\\\/async\\\\/bulk(\\\\\\\\/V.+)/`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Performs a bulk API request by executing `}<inlineCode parentName=\"td\">{`Magento\\\\AsynchronousOperations\\\\Model\\\\MassSchedule::publishMass`}</inlineCode>{`, which places multiple messages in the queue.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`asyncBulkSchema`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\VirtualType\\\\AsynchronousBulkSchemaRequestProcessor`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`async/bulk/schema`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Currently not used. Reserved for future use.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p><inlineCode parentName=\"p\">{`async`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`asyncBulk`}</inlineCode>{` share the same processor but have different URL patterns.`}</p>\n    <h2 {...{\n      \"id\": \"create-a-new-processor\"\n    }}>{`Create a new processor`}</h2>\n    <p>{`To create a custom processor, you must perform the following tasks:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Define the custom processor in `}<inlineCode parentName=\"li\">{`webapi_rest/di.xml`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`Create a processor class and implement the `}<inlineCode parentName=\"li\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorInterface`}</inlineCode>{` interface.`}</li>\n      <li parentName=\"ul\">{`Define the processing rules in the `}<inlineCode parentName=\"li\">{`canProcess`}</inlineCode>{` method.`}</li>\n      <li parentName=\"ul\">{`Create the processor logic in the `}<inlineCode parentName=\"li\">{`process`}</inlineCode>{` method.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"define-the-custom-processor\"\n    }}>{`Define the custom processor`}</h3>\n    <p>{`Processors must be defined in a module's `}<inlineCode parentName=\"p\">{`webapi_rest/di.xml`}</inlineCode>{` file. The following example shows the definition of the default `}<inlineCode parentName=\"p\">{`sync`}</inlineCode>{` processor:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<type name=\"Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorPool\">\n    <arguments>\n        <argument name=\"requestProcessors\" xsi:type=\"array\">\n            <item name=\"sync\" xsi:type=\"object\" sortOrder=\"100\">Magento\\\\Webapi\\\\Controller\\\\Rest\\\\SynchronousRequestProcessor</item>\n        </argument>\n    </arguments>\n</type>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"create-the-processor-class\"\n    }}>{`Create the processor class`}</h2>\n    <p>{`A custom processor must implement the `}<inlineCode parentName=\"p\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorInterface`}</inlineCode>{` interface, as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright Â© Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndeclare(strict_types=1);\n\nnamespace Magento\\\\Webapi\\\\Controller\\\\Rest;\n\n/**\n *  Request processor interface\n */\ninterface RequestProcessorInterface\n{\n    /**\n     * Executes the logic to process the request\n     *\n     * @param \\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request\n     * @return void\n     * @throws \\\\Magento\\\\Framework\\\\Exception\\\\AuthorizationException\n     * @throws \\\\Magento\\\\Framework\\\\Exception\\\\InputException\n     * @throws \\\\Magento\\\\Framework\\\\Webapi\\\\Exception\n     */\n    public function process(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request);\n\n    /**\n     * Method should return true for all the requests the current processor can process.\n     *\n     * Invoked in the loop for all registered request processors. The first one wins.\n     *\n     * @param \\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request\n     * @return bool\n     */\n    public function canProcess(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request);\n}\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`canProcess(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request)`}</inlineCode>{` method defines whether the current request can be processed. Currently, all implemented processors match current request URLs with the defined patterns.`}</p>\n    <p>{`For example, `}<inlineCode parentName=\"p\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\AsynchronousRequestProcessor`}</inlineCode>{` processes asynchronous calls, such as `}<inlineCode parentName=\"p\">{`<host>/rest/async/V1/products`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`const PROCESSOR_PATH = \"/^\\\\\\\\/async(\\\\\\\\/V.+)/\";\n\n.....\n\npublic function canProcess(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request)\n{\n    if ($request->getHttpMethod() === \\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request::HTTP_METHOD_GET) {\n        return false;\n    }\n\n    if (preg_match($this->processorPath, $request->getPathInfo()) === 1) {\n        return true;\n    }\n    return false;\n}\n\n.....\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`process(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request)`}</inlineCode>{` method executes processor logic.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}